(function(e){function t(t){for(var r,a,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],s[a]&&d.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={admin:0},s={admin:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-07fcdbf0":"3adcfb9f","chunk-2d1af510":"c7d9ee60","chunk-2d2295aa":"4104b53c","chunk-6994d976":"583dc6a6","chunk-c7de5e90":"277af4c4"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-07fcdbf0":1,"chunk-2d1af510":1,"chunk-6994d976":1,"chunk-c7de5e90":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-07fcdbf0":"31ff6cdd","chunk-2d1af510":"06f6e685","chunk-2d2295aa":"31d6cfe0","chunk-6994d976":"6081d5d0","chunk-c7de5e90":"9ad5e798"}[e]+".css",s=c.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===s))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],p.parentNode.removeChild(p),n(o)},p.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}s[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/MYCHAT/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;o.push([2,"chunk-vendors","chunk-common"]),n()})({"1cce":function(e,t,n){},2:function(e,t,n){e.exports=n("51c0")},"20e1":function(e,t,n){},"51c0":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("bc3a"),s=n.n(a),o=n("e069"),i=n.n(o),c=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",{staticClass:"login"},[n("Col",{staticClass:"login-col",attrs:{xs:{span:24},md:{span:12,push:6},lg:{span:7,push:8}}},[n("Form",{ref:"loginForm",staticClass:"form_box",attrs:{model:e.user,rules:e.rules,"status-icon":""}},[n("FormItem",[n("h1",[e._v("管理端")])]),n("FormItem",{attrs:{prop:"id"}},[n("Input",{attrs:{type:"text",placeholder:"请输入帐号",suffix:"ios-contact",size:"large"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username","string"===typeof t?t.trim():t)},expression:"user.username"}})],1),n("FormItem",{attrs:{prop:"pass"}},[n("InputPassword",{attrs:{type:"password",placeholder:"请输入密码",size:"large"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password","string"===typeof t?t.trim():t)},expression:"user.password"}})],1),n("FormItem",{attrs:{prop:"code"}},[n("Input",{attrs:{type:"text",placeholder:"请输入验证码",size:"large"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code","string"===typeof t?t.trim():t)},expression:"user.code"}},[n("template",{slot:"append"},[n("Tooltip",{attrs:{effect:"dark",content:"看不清，换一张",placement:"right-end"}},[n("div",{staticClass:"codeimg",style:{backgroundImage:"url("+e.imgsrc+")"},on:{click:e.clickIMG}})])],1)],2)],1),n("FormItem",[n("Button",{staticClass:"btn-block",attrs:{type:"primary",disabled:e.disabled,loading:e.loading,long:""},on:{click:e.login}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&!e.disabled,expression:"!loading&&!disabled"}]},[e._v("登录")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[e._v("登录中")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}]},[e._v("登录成功")])])],1)],1)],1)],1)],1)},l=[];n("04e2");function d(){return axios.get("/imgCode")}var p={components:{InputPassword:function(){return n.e("chunk-2d2295aa").then(n.bind(null,"dca6"))}},data:function(){return{user:{username:"",password:"",code:""},rules:{username:[{required:!0,message:"请输入登录帐号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},imgsrc:"",loading:!1,disabled:!1}},created:function(){this.clickIMG()},methods:{clickIMG:function(){var e=this;console.log(1),d().then(function(t){console.log(t),e.imgsrc=t}).catch(function(e){console.log(e)})},login:function(){var e=this,t=this;t.loading=!0;var n=t.user;t.$refs["loginForm"].validate(function(r){r?t.$store.dispatch("login_user",n).then(function(n){t.$Message.success({content:"登录成功",onClose:function(){e.$router.push({path:"/main"})}}),t.disabled=!0}).catch(function(e){console.log(e),t.clickIMG(),t.user.password=t.user.code=""}).finally(function(){return t.loading=!1}):t.loading=!1})}}},f=p,m=(n("be16"),n("af95"),n("2877")),g=Object(m["a"])(f,u,l,!1,null,"6fef128e",null),h=g.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout"},[n("Layout",[n("Sider",{ref:"side1",staticStyle:{height:"100vh"},attrs:{"hide-trigger":"",collapsible:"","collapsed-width":78},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[n("Menu",{class:e.menuitemClasses,attrs:{"active-name":e.activename,theme:"dark",width:"auto"}},[n("MenuItem",{attrs:{name:1,to:"/main"}},[n("Icon",{attrs:{type:"md-map"}}),n("span",[e._v("信息统计")])],1),n("MenuItem",{attrs:{name:2,to:"/userManager"}},[n("Icon",{attrs:{type:"md-person"}}),n("span",[e._v("用户管理")])],1)],1)],1),n("Layout",[n("Header",{staticClass:"layout-header-bar",style:{padding:0}},[n("Icon",{class:e.rotateIcon,style:{margin:"0 20px"},attrs:{type:"md-menu",size:"24"},nativeOn:{click:function(t){return e.collapsedSider(t)}}}),n("div",{staticClass:"float-rt admin-info"},[n("span",[e._v("欢迎您，管理员xxx")]),n("Icon",{style:{margin:"0 20px",cursor:"pointer",color:"#f00"},attrs:{custom:"mychat-icon-loginout",size:"24"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"navtive",void 0,t.key,void 0)?null:e.logout(t)}}})],1)],1),n("Content",{style:{margin:"20px"}},[n("transition",{attrs:{mode:"out-in",name:"el-fade-in-linear"}},[n("router-view")],1)],1)],1)],1)],1)},b=[],y=n("cebc"),w=n("2f62"),k={data:function(){return{isCollapsed:!1,activename:"1",activeto:["/main","/userManager"]}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:Object(y["a"])({},Object(w["b"])(["logout"]),{collapsedSider:function(){this.$refs.side1.toggleCollapse()},updateActiveName:function(){console.log(this.activeto.indexOf(this.$route.path)+1),this.activename=this.activeto.indexOf(this.$route.path)+1}}),created:function(){this.updateActiveName()},watch:{$route:function(e){this.updateActiveName()}}},x=k,_=(n("f963"),Object(m["a"])(x,v,b,!1,null,"6eacd551",null)),C=_.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Row",[n("Col",{attrs:{span:24}},[n("Card",{staticStyle:{"margin-bottom":"20px"}},[e._v("当前系统用户人数 "+e._s(e.userNumber))])],1),n("Col",{attrs:{span:12}},[n("ve-pie",e._b({ref:"chart1",attrs:{title:{text:"男女比例"}}},"ve-pie",e.pie,!1))],1),n("Col",{attrs:{span:12}},[n("ve-map",e._b({ref:"chart2",attrs:{title:{text:"用户分布"},height:"600px"}},"ve-map",e.map,!1))],1)],1)},O=[];n("ac6a");function j(){return axios.post("/getUserInformation")}function M(e){return axios.post("/selectAllUser",e)}function S(e){return axios.post("/prohibitUser",{userId:e})}function $(e){return axios.post("/releaseUser",{userId:e})}n("5118");var P={data:function(){return{userNumber:0,chartRefs:["chart1","chart2"],pie:{data:{columns:["name","number"],rows:[]},setting:{labelMap:{number:"比例"}}},map:{data:{columns:["name","number"],rows:[]},settings:{labelMap:{number:"用户人数"},selectData:!0,position:"china",dimension:"name",metrics:["number"]}}}},created:function(){var e=this;j().then(function(t){console.log(t),e.map.data.rows=t.userAddress,e.pie.data.rows=t.userGender,e.userNumber=t.userNumber,e.$nextTick(function(t){e.chartRefs.forEach(function(t){e.$refs[t].echarts.resize()})})})},updated:function(){},methods:{}},z=P,T=Object(m["a"])(z,I,O,!1,null,null,null),N=T.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("Select",{staticStyle:{width:"200px",margin:"20px"},model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}},e._l(e.select.data,function(e){return n("Option",{key:e.value,attrs:{value:e.value,label:e.title}})}),1)],1),n("Table",e._b({},"Table",e.table,!1)),n("Page",{attrs:{total:e.page.total,"show-total":"","show-sizer":"","show-elevator":"",current:e.page.current,"page-size":e.page.pageSize,"page-size-opts":e.page.pageSizeOpts},on:{"update:current":function(t){return e.$set(e.page,"current",t)},"on-change":e.pageCurrentChange,"on-page-size-change":e.pageSizeChange}})],1)},A=[],U=(n("7f7f"),{data:function(){var e=this;return{table:{loading:!1,stripe:!0,columns:[{title:"用户id",key:"userId"},{title:"昵称",key:"nickname"},{title:"真实姓名",key:"name"},{title:"联系方式",key:"tel"},{title:"年龄",key:"age"},{title:"性别",key:"gender"},{title:"地区",key:"address"},{title:"操作",key:"action",width:300,align:"center",render:function(t,n){var r=n.row,a=r.status,s=r.userId;return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.show(n.row)}}},"查看详情"),0==a?t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(s)}}},"冻结用户"):t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.add(s)}}},"解冻用户")])}}],data:[]},page:{total:0,current:1,pageSize:10,pageSizeOpts:[10,20]},select:{value:2,data:[{title:"全部信息",value:2},{title:"正常",value:0},{title:"冻结",value:1}]}}},created:function(){this.getUsers()},watch:{"select.value":function(e){this.getUsers()}},methods:{getUsers:function(){var e=this;this.loading=!0,M({current:this.page.current,pagesize:this.page.pageSize,selectvalue:this.select.value}).then(function(t){var n=t.list,r=t.total;e.table.data=n,e.page.total=r,e.loading=!1})},show:function(e){this.$Modal.info({title:"用户信息",content:'头像：<img width="200" height="200" src="/api/'.concat(e.imgurl,'"/><br>姓名：').concat(e.name,"<br>昵称：").concat(e.nickname,"<br>年龄：").concat(e.age,"<br>地区：").concat(e.address)})},remove:function(e){var t=this;S(e).then(function(){t.$Message.success("禁用成功"),t.getUsers()})},add:function(e){var t=this;$(e).then(function(){t.$Message.success("解禁成功"),t.getUsers()})},pageCurrentChange:function(e){this.getUsers()},pageSizeChange:function(e){this.page.pageSize=e,this.getUsers()}}}),R=U,F=Object(m["a"])(R,E,A,!1,null,null,null),q=F.exports;r["default"].use(c["a"]);var B=new c["a"]({routes:[{path:"/",component:h},{path:"/main",component:C,children:[{path:"",component:N},{path:"/userManager",component:q}]}]}),L={timeout:6e4,withCredentials:!0},G=s.a.create(L),H=s.a.CancelToken,D=H.source();G.interceptors.request.use(function(e){return e.url="".concat("http://localhost:8081/MYCHAT").concat(e.url),e.headers["X-Request-With"]="XMLHttpRequest",e.cancelToken=D.token,e},function(e){return o["Message"].error({content:"请求超时,请稍候再试"}),Promise.reject(e)}),G.interceptors.response.use(function(e){var t=e.data,n=t.code,r=t.msg,a=t.data;switch(console.log(a),n){case"0":break;default:return o["Message"].error({content:r,onClose:function(){-999==n&&(B.path("/login"),store.commit("set_is_login",!1),store.commit("remove_user"))}}),Promise.reject()}return a},function(e){return s.a.isCancel(e)?new Promise(function(){}):(o["Message"].error({content:"网络错误，请检查网络是否畅通"}),Promise.reject(e))}),Plugin.install=function(e,t){e.axios=G,window.axios=G,Object.defineProperties(e.prototype,{axios:{get:function(){return G}},$axios:{get:function(){return G}}})},r["default"].use(Plugin);Plugin;var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"admin"}},[n("transition",{attrs:{mode:"out-in",name:"el-fade-in-linear"}},[n("router-view")],1)],1)},X=[],Y={name:"app"},K=Y,W=(n("f4ba"),Object(m["a"])(K,J,X,!1,null,null,null)),Q=W.exports,V=(n("96cf"),n("3b8d"));function Z(e){return axios.post("/login",Object(y["a"])({role:1},e))}function ee(){return axios.post("/logout")}var te={user:{},islogin:!1},ne={update_user:function(e,t){e.user=t},set_is_login:function(e,t){e.islogin=t},remove_user:function(e){e.user={},e.islogin=!1}},re={get_user:function(e){return e.user},get_loginstatus:function(e){return e.islogin}},ae={login_user:function(){var e=Object(V["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.dispatch,e.next=3,Z(n).then(function(e){return r("update_user",e),r("set_is_login",!0),Promise.resolve()}).catch(function(e){return Promise.reject()});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(V["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee().then(function(e){return t.commit("update_user",{}),t.commit("set_is_login",!1),o["Message"].success({content:"退出成功",onClose:function(){B.push("/login")}}),Promise.reject()}).catch(function(e){return Promise.reject()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},se={state:te,getters:re,actions:ae,mutations:ne},oe=se,ie=n("a768"),ce=n.n(ie);r["default"].use(w["a"]);var ue=new w["a"].Store({modules:{user:oe},plugins:[ce()({namespace:"mychat-admin-store",initalState:{},expires:36e5})]});n("dcad"),n("1cce");r["default"].use(i.a);n("6861");var le=n("2819"),de=n.n(le);r["default"].use(de.a),r["default"].config.productionTip=!1,new r["default"]({router:B,store:ue,render:function(e){return e(Q)}}).$mount("#admin")},"9c4d":function(e,t,n){},af95:function(e,t,n){"use strict";var r=n("fef8"),a=n.n(r);a.a},be16:function(e,t,n){"use strict";var r=n("9c4d"),a=n.n(r);a.a},ca7d:function(e,t,n){},f4ba:function(e,t,n){"use strict";var r=n("20e1"),a=n.n(r);a.a},f963:function(e,t,n){"use strict";var r=n("ca7d"),a=n.n(r);a.a},fef8:function(e,t,n){}});
//# sourceMappingURL=admin.24dae1c2.js.map